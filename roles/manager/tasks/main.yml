- name: 'Pull master repo'
  git:
    repo: https://github.com/boz83/SFIA-2-Strat-Roulette.git
    clone: no
    update: yes

- name: 'Initialise docker swarm'
  docker_swarm:
    state: present

- name: 'get swarm worker token'
  shell: docker swarm join-token -q worker
  register: worker_token

- name: 'host'
  add_host:
    name: 'join_token'
    value: '{{ worker_token }}'